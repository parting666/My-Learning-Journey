import{Ct as e,Dt as t,It as n,Mt as r,Nt as i,Ot as a,Pt as o,St as s,Tt as c,bt as l,et as u,gt as d,lt as f,n as p,nt as m,st as h,t as g,vt as _,xt as v}from"./index-BRCa6BxR.js";var y={class:`max-w-4xl mx-auto py-8 px-4`},b={class:`bg-white rounded-xl shadow-sm border border-gray-100 p-6`},x={class:`flex justify-between items-center mb-6`},S=[`disabled`],C={key:0,class:`animate-spin rounded-full h-4 w-4 border-b-2 border-current`},w={key:0,class:`mb-8 overflow-x-auto`},T={class:`w-full text-left`},E={class:`py-3 px-4 flex items-center gap-2`},D=[`src`],O={key:1,class:`w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-500`},k={class:`font-medium`},A={class:`py-3 px-4 font-mono`},j={class:`py-3 px-4 text-sm text-gray-500 font-mono truncate max-w-[150px]`},M={class:`py-3 px-4`},N=[`onClick`],P={key:1,class:`text-center py-8 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-200 mb-8`},F={key:2,class:`bg-gray-50 rounded-lg p-6 border border-gray-200 animate-fade-in`},I={class:`flex justify-between items-center mb-4`},L={class:`font-bold text-gray-800`},R={class:`space-y-4`},z=[`value`],B=[`disabled`],V=g(c({__name:`ERC20Assets`,setup(c){let{account:g,signer:V}=u(),H=i([]),U=i(null),W=i(``),G=i(``),K=i(!1),q=i(!1),J=(e,t=18)=>parseFloat(h(e,t)).toFixed(4),Y=async()=>{if(g.value){q.value=!0;try{let e=await p.core.getTokenBalances(g.value);H.value=(await Promise.all(e.tokenBalances.filter(e=>e.tokenBalance&&e.tokenBalance!==`0x0`).map(async e=>{try{let t=await p.core.getTokenMetadata(e.contractAddress);return{contractAddress:e.contractAddress,balance:e.tokenBalance,name:t.name,symbol:t.symbol,decimals:t.decimals,logo:t.logo}}catch(e){return console.error(`Metadata fetch error`,e),null}}))).filter(e=>e!==null)}catch(e){console.error(`Scan tokens error:`,e),alert(`Failed to scan tokens. Ensure API Key is set.`)}finally{q.value=!1}}},X=e=>{U.value=e},Z=async()=>{if(!(!V.value||!U.value||!W.value||!G.value)){K.value=!0;try{let e=new m(U.value.contractAddress,[`function transfer(address to, uint256 amount) returns (bool)`,`function decimals() view returns (uint8)`],V.value),t=f(G.value,U.value.decimals);await(await e.transfer(W.value,t)).wait(),alert(`Token Transfer Successful!`),W.value=``,G.value=``,await Y()}catch(e){console.error(`ERC20 transfer error:`,e),alert(e.message||`Token Transfer Failed`)}finally{K.value=!1}}};return(i,c)=>(t(),s(`div`,y,[c[8]||=l(`h1`,{class:`text-3xl font-bold text-gray-900 mb-8`},`ERC20 Assets`,-1),l(`section`,b,[l(`div`,x,[c[3]||=l(`h2`,{class:`text-xl font-bold text-gray-800`},`Your ERC20 Tokens`,-1),l(`button`,{onClick:Y,disabled:q.value||!o(g),class:`px-4 py-2 bg-white border border-indigo-600 text-indigo-600 rounded-lg font-semibold hover:bg-indigo-50 disabled:opacity-50 transition-colors flex items-center gap-2`},[q.value?(t(),s(`span`,C)):v(``,!0),e(` `+n(q.value?`Scanning...`:`Scan Assets (Alchemy)`),1)],8,S)]),H.value.length>0?(t(),s(`div`,w,[l(`table`,T,[c[4]||=l(`thead`,null,[l(`tr`,{class:`border-b border-gray-200`},[l(`th`,{class:`py-2 px-4 font-semibold text-gray-600`},`Asset`),l(`th`,{class:`py-2 px-4 font-semibold text-gray-600`},`Balance`),l(`th`,{class:`py-2 px-4 font-semibold text-gray-600`},`Address`),l(`th`,{class:`py-2 px-4 font-semibold text-gray-600`},`Action`)])],-1),l(`tbody`,null,[(t(!0),s(_,null,a(H.value,e=>(t(),s(`tr`,{key:e.contractAddress,class:`border-b border-gray-50 hover:bg-gray-50 transition-colors`},[l(`td`,E,[e.logo?(t(),s(`img`,{key:0,src:e.logo,class:`w-6 h-6 rounded-full`},null,8,D)):(t(),s(`div`,O,n(e.symbol?.[0]),1)),l(`span`,k,n(e.symbol||`Unknown`),1)]),l(`td`,A,n(J(e.balance,e.decimals)),1),l(`td`,j,n(e.contractAddress),1),l(`td`,M,[l(`button`,{onClick:t=>X(e),class:`text-sm text-indigo-600 hover:text-indigo-800 font-medium`},` Select `,8,N)])]))),128))])])])):q.value?v(``,!0):(t(),s(`div`,P,` No tokens found or scan not initiated. Click "Scan Assets" to fetch your tokens. `)),U.value?(t(),s(`div`,F,[l(`div`,I,[l(`h3`,L,`Transfer `+n(U.value.symbol),1),l(`button`,{onClick:c[0]||=e=>U.value=null,class:`text-gray-500 hover:text-gray-700 text-xl`},`Ã—`)]),l(`div`,R,[l(`div`,null,[c[5]||=l(`label`,{class:`block text-sm font-medium text-gray-700 mb-1`},`Contract Address`,-1),l(`input`,{value:U.value.contractAddress,disabled:``,class:`w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-500 font-mono text-sm`},null,8,z)]),l(`div`,null,[c[6]||=l(`label`,{class:`block text-sm font-medium text-gray-700 mb-1`},`Recipient`,-1),r(l(`input`,{"onUpdate:modelValue":c[1]||=e=>W.value=e,type:`text`,placeholder:`0x...`,class:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none`},null,512),[[d,W.value]])]),l(`div`,null,[c[7]||=l(`label`,{class:`block text-sm font-medium text-gray-700 mb-1`},`Amount`,-1),r(l(`input`,{"onUpdate:modelValue":c[2]||=e=>G.value=e,type:`number`,placeholder:`0.0`,class:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none`},null,512),[[d,G.value]])]),l(`button`,{onClick:Z,disabled:K.value,class:`w-full py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-400 transition-colors`},n(K.value?`Transferring...`:`Transfer Token`),9,B)])])):v(``,!0)])]))}}),[[`__scopeId`,`data-v-13312d12`]]);export{V as default};